# Как получить координаты полигонов из Google My Maps

## Пошаговая инструкция:

### Шаг 1: Экспорт карты в KML

1. Откройте карту: https://www.google.com/maps/d/u/0/viewer?mid=1IfxTsTdE_9g3TkhGFnBOVru_GQCVDNo
2. Нажмите на **меню** (три горизонтальные линии) в левом верхнем углу
3. Выберите **"Экспортировать на компьютер"** или **"Export to KML"**
4. Скачайте файл в формате **KML** (не KMZ!)
5. Сохраните файл как `zones.kml` в папку `scripts/`

### Шаг 2: Парсинг KML файла

Запустите команду:
```bash
npm run zones:parse-kml
```

Это создаст файл `scripts/zones-exported.json` с координатами всех зон.

### Шаг 3: Заполнение данных о зонах

Откройте файл `scripts/zones-exported.json` и для каждой зоны заполните:
- `minOrderAmount` - минимальная сумма заказа (из ваших данных)
- `deliveryPrice` - стоимость доставки (из ваших данных)
- `estimatedTime` - время доставки в минутах (из ваших данных)

Пример данных из ваших зон:
- Петро-Кам 1 Y1: minOrderAmount: 2000, deliveryPrice: 400, estimatedTime: 90
- Петро-Кам 1 Y2: minOrderAmount: 1800, deliveryPrice: 350, estimatedTime: 90
- Петро-Кам 1 УЗ: minOrderAmount: 1800, deliveryPrice: 300, estimatedTime: 90
- и т.д.

### Шаг 4: Импорт в базу данных

После заполнения данных запустите:
```bash
npm run zones:import-json
```

Это создаст/обновит все зоны в базе данных с точными координатами из Google Maps.

## Альтернативный способ: Через консоль браузера

Если экспорт KML не работает, можно получить координаты через консоль браузера:

1. Откройте карту в браузере
2. Откройте DevTools (F12)
3. Перейдите на вкладку "Console"
4. Введите следующий код:

```javascript
// Найти все полигоны на карте
const map = window.map; // или другой способ получить объект карты
// Это зависит от того, как Google My Maps отображает карту
```

Но проще всего использовать экспорт KML.

## Формат координат

Координаты в базе данных должны быть в формате GeoJSON:
```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [158.6503, 53.0194],  // [lng, lat] - сначала долгота, потом широта!
      [158.6510, 53.0194],
      [158.6510, 53.0200],
      [158.6503, 53.0200],
      [158.6503, 53.0194]   // Последняя точка = первой (замыкание полигона)
    ]
  ]
}
```

**ВАЖНО:** 
- Формат: `[longitude, latitude]` (сначала долгота, потом широта!)
- Полигон должен быть замкнутым (первая и последняя точки совпадают)

