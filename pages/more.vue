<script setup lang="ts">
const auth = useAuth()
const router = useRouter()
const showAuthModal = ref(false)

const handleAuthSuccess = (phone: string) => {
  showAuthModal.value = false
  // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å
  router.push('/profile')
}

const handleAuthCancel = () => {
  showAuthModal.value = false
}

const handleLogin = () => {
  if (auth.isAuthenticated.value) {
    router.push('/profile')
  } else {
    showAuthModal.value = true
  }
}

const handleContact = () => {
  // –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
  // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º alert
  alert('–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏:\n–¢–µ–ª–µ—Ñ–æ–Ω: +7 (415) 231-31-21\nEmail: info@rollix.ru')
}

const handleAbout = () => {
  router.push('/about')
}
</script>

<template>
  <main class="w-full min-h-screen pb-20">
    <div class="flex flex-col items-center px-4 py-8">
      <!-- –õ–æ–≥–æ—Ç–∏–ø -->
      <div class="mb-8 mt-4">
        <img src="/logo.svg" alt="Rollix" class="h-16 w-auto" />
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ -->
      <div class="w-full max-w-md space-y-3">
        <!-- –í–æ–π—Ç–∏ -->
        <button
          @click="handleLogin"
          class="w-full px-6 py-4 bg-card border border-white/10 rounded-lg hover:bg-white/5 transition-colors flex items-center justify-between group">
          <div class="flex items-center gap-3">
            <span class="text-2xl">üë§</span>
            <span class="text-white font-medium">{{ auth.isAuthenticated ? '–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç' : '–í–æ–π—Ç–∏' }}</span>
          </div>
          <span class="text-gray-400 group-hover:text-white transition-colors">‚Üí</span>
        </button>

        <!-- –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏ -->
        <button
          @click="handleContact"
          class="w-full px-6 py-4 bg-card border border-white/10 rounded-lg hover:bg-white/5 transition-colors flex items-center justify-between group">
          <div class="flex items-center gap-3">
            <span class="text-2xl">‚úâÔ∏è</span>
            <span class="text-white font-medium">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</span>
          </div>
          <span class="text-gray-400 group-hover:text-white transition-colors">‚Üí</span>
        </button>

        <!-- –û —Å–∞–π—Ç–µ -->
        <button
          @click="handleAbout"
          class="w-full px-6 py-4 bg-card border border-white/10 rounded-lg hover:bg-white/5 transition-colors flex items-center justify-between group">
          <div class="flex items-center gap-3">
            <span class="text-2xl">‚ÑπÔ∏è</span>
            <span class="text-white font-medium">–û —Å–∞–π—Ç–µ</span>
          </div>
          <span class="text-gray-400 group-hover:text-white transition-colors">‚Üí</span>
        </button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <Modal :open="showAuthModal" title="–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" @close="showAuthModal = false">
      <SmsAuth @success="handleAuthSuccess" @cancel="handleAuthCancel" />
    </Modal>
  </main>
</template>

