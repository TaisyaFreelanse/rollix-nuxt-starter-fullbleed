# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å iikoCloud

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
- ‚úÖ –ó–∞–∫–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ iikoCloud
- ‚úÖ ID –∑–∞–∫–∞–∑–∞ –∏–∑ iikoCloud —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (`aikoOrderId`)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ iikoCloud API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

**–¢–µ—Å—Ç:** `npm run iiko:test-order`
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –≤ –ë–î: ‚úÖ
- –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ iikoCloud: ‚úÖ
- ID –ø–æ–ª—É—á–µ–Ω: `de70876b-56ed-4c1c-a120-a290e01bc611`

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ iikoCloud
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ iikoCloud ‚Üí –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç–∞—Ç—É—Å—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

**–¢–µ—Å—Ç:** `npm run iiko:test-sync`
- –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ iikoCloud: ‚úÖ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç: ‚úÖ

### 3. API Endpoints
- ‚úÖ `GET /api/orders/[id]` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `hasIikoSync` –∏ `iikoOrderId`
- ‚úÖ `POST /api/orders/[id]/sync-status` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- ‚úÖ `POST /api/aiko/sync-orders-status` - –º–∞—Å—Å–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### 4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (`components/Profile/ProfileOrders.vue`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å iikoCloud –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ —Å `aikoOrderId`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å iikoCloud

#### –î–ª—è –∞–¥–º–∏–Ω–∫–∏
- ‚úÖ `pages/admin/orders/index.vue` - –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ `pages/admin/orders/[id].vue` - –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ `pages/admin/index.vue` - –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏ "–ó–∞–∫–∞–∑—ã"
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ID –∑–∞–∫–∞–∑–∞ –≤ iikoCloud
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 5. –†–µ–∞–ª—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (`/api/ws/orders/{orderId}`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ `broadcastOrderUpdate()`
- ‚úÖ Composable `useOrderStatus` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º polling
- ‚úÖ Composable `useOrderWebSocket` —Å fallback –Ω–∞ polling

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ç–µ—Å—Ç:**
- –ó–∞–∫–∞–∑–æ–≤ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π: 2
- –£—Å–ø–µ—à–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: 100%
- –û—à–∏–±–æ–∫: 0

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
npm run iiko:test-order

# –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤
npm run iiko:test-sync

# –¢–µ—Å—Ç API endpoints (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π dev —Å–µ—Ä–≤–µ—Ä)
npm run iiko:test-api

# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ–Ω—é –∏–∑ iikoCloud
npm run iiko:test

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–Ω—é –≤ –ë–î
npm run iiko:sync
```

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**: iikoCloud —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (`creationStatus: "InProgress"`). –°—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.

2. **–¢–∞–π–º–∞—É—Ç—ã**: –ï—Å–ª–∏ –∑–∞–∫–∞–∑ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, iikoCloud –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `creationStatus: "Error"`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–µ—Ç—Å—è `PENDING`.

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –ó–∞–∫–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ iikoCloud –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, –µ—Å–ª–∏ `AUTO_SEND_TO_AIKO=true` –≤ `.env`.

## ‚úÖ –ò—Ç–æ–≥

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤: ‚úÖ
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ iikoCloud: ‚úÖ
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤: ‚úÖ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: ‚úÖ
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: ‚úÖ
- –†–µ–∞–ª—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ‚úÖ

